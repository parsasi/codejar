(this["webpackJsonpcode-jar"]=this["webpackJsonpcode-jar"]||[]).push([[0],{264:function(e,n,t){},285:function(e,n,t){e.exports=t.p+"static/media/logo_transparent_hori.b395bcdd.png"},288:function(e,n,t){e.exports=t.p+"static/media/logo_transparent.a949cc59.png"},290:function(e,n,t){e.exports=t.p+"static/media/logo_transparent_small.d37c4c7e.png"},294:function(e,n,t){e.exports=t(500)},299:function(e,n,t){},303:function(e,n,t){},304:function(e,n,t){},335:function(e,n,t){},336:function(e,n,t){},436:function(e,n,t){},437:function(e,n,t){},438:function(e,n,t){},439:function(e,n,t){},444:function(e,n,t){},445:function(e,n,t){},446:function(e,n,t){},456:function(e,n,t){},457:function(e,n,t){},458:function(e,n,t){},459:function(e,n,t){},460:function(e,n,t){},461:function(e,n,t){},491:function(e,n){},494:function(e,n,t){},499:function(e,n,t){},500:function(e,n,t){"use strict";t.r(n);var a=t(6),c=t.n(a),r=t(182),i=t.n(r),o=(t(299),t(208)),l=t(86),u=t(36),s=(t(303),t(304),t(41)),d=Object(a.createContext)([!1,function(){}]);function m(e){var n=Object(a.useContext)(d),t=Object(s.a)(n,2),r=(t[0],t[1]);return c.a.createElement("li",{className:"WindowBarListItem"},c.a.createElement("button",{className:"WindowBarListItemButton",onClick:function(){return r(!0)}},"Share"))}function f(e){return c.a.createElement("li",{className:"WindowBarListItem"},c.a.createElement("a",{className:"WindowBarListItemButton",href:"https://codejar.live/"},"New Workspace"))}function p(e){return c.a.createElement("div",{className:"WindowBarListContainer"},c.a.createElement("ul",{className:"WindowBarList"},c.a.createElement(f,null),c.a.createElement(m,null),c.a.createElement("li",{className:"WindowBarListItem"},c.a.createElement("button",{className:"WindowBarListItemButton"},"Download"))))}var E=t(284);function v(e){return c.a.createElement(E.a,{icon:e.icon,size:e.size?e.size:"sm",spin:e.spin})}var b=t(54);function g(e){return c.a.createElement("li",{className:"controlListItem ".concat(!e.isAdmin&&"deactivated"),onClick:e.saveClickHandler},c.a.createElement("a",null,c.a.createElement(v,{icon:b.k,size:"lg"})))}var j=function(e){var n=0;if(0==e.length)return n;for(var t=0;t<e.length;t++){n=(n<<5)-n+e.charCodeAt(t),n&=n}return n},h=t(69),O=t(105),w=t.n(O),C=Object(h.b)("workspace/postContent",(function(e){var n=e.nanoId,t=e.content,a=e.workspaceId;return w.a.post("".concat("https://codejar.live/","ws/content"),{nanoid:n,content:t,workspaceid:a})})),k=function(){var e=Object(u.b)(),n=Object(u.c)((function(e){return e.files.currentFile})),t=Object(u.c)((function(e){return e.workspace.workspaceId}));return function(){n.id&&(j(n.content)!==n.savedHash&&e(C({nanoId:n.id,content:n.content,workspaceId:t})))}};function F(){return!!Object(u.c)((function(e){return e.workspace.adminCode}))}function I(e){var n=k(),t=F();return c.a.createElement(g,{saveClickHandler:t?function(e){e.preventDefault(),n()}:null,isAdmin:t})}var x=t(234),N=t.n(x);function S(e){return c.a.createElement("li",{className:"controlListItem"},c.a.createElement(N.a,{defaultChecked:e.checked,onChange:e.toggleChangeHandler,icons:{checked:c.a.createElement(v,{icon:b.b,size:"xs"}),unchecked:c.a.createElement(v,{icon:b.b,size:"xs"})}}))}var y=Object(a.createContext)({});function L(e){var n=Object(a.useState)(!1),t=Object(s.a)(n,2),r=t[0],i=t[1],o=Object(a.useContext)(y);Object(a.useEffect)((function(){o.on&&i(o.connected)}),[r,i,o.on]);return c.a.createElement(S,{checked:!0,toggleChangeHandler:function(e){e.target.checked?(o.connect(),i(!0)):(o.disconnect(),i(!1))}})}t(325);function M(e){return c.a.createElement("div",{className:"controls"},c.a.createElement("ul",{className:"controlsList"},c.a.createElement(L,null),c.a.createElement(I,null)))}function A(e){return c.a.createElement("div",{className:"windowbar"},c.a.createElement(p,null),c.a.createElement(M,null))}var B=t(76),R=Object(h.b)("files/fetchFiles",(function(e){return w.a.get("".concat("https://codejar.live/","ws/files"),{params:{wsid:e}})})),D=Object(h.b)("files/fetchContent",(function(e){return w.a.get("".concat("https://codejar.live/","ws/content"),{params:{nanoid:e}})})),H=Object(h.b)("workspace/postFile",(function(e){var n=e.nanoId,t=e.extention,a=e.name,c=e.workspaceId,r=e.content;return w.a.post("".concat("https://codejar.live/","ws/file"),{nanoid:n,name:a,extention:t,workspaceid:c,content:r})})),P=Object(h.b)("files/renameFile",(function(e){var n=e.nanoId,t=e.extention,a=e.name,c=e.workspaceId;return w.a.post("".concat("https://codejar.live/","ws/file/rename"),{nanoid:n,name:a,extention:t,workspaceid:c})})),T=t(163);var W,_=function(e){return e.reduce((function(e,n){return e+"."+n}))},z={id:"",name:"",extention:"",lang:"",timeCreated:"",content:"",lastUpdated:"",current:!1,saved:!1,syncing:!1,error:!1,savedHash:"",justCreated:!1},U=function(e){var n=e.name,t=e.extention,a=e.id,c=e.content,r=e.justCreated;if(!t){var i=function(e){var n=e.split("."),t=n.length>1?n.pop():"";return{name:_(n),extention:t}}(n);n=i.name,t=i.extention}r=!!r;var o=(new Date).toString(),l=function(e,n){var t={js:"javascript",css:"css",cs:"csharp",html:"html",json:"json",ini:"ini",ts:"typescript",php:"php",gitignore:"plaintext",py:"python",java:"java",md:"markdown",sql:"sql"},a={dockerfile:"dockerfile"};return t[n]?t[n]:a[e]?a[e]:"plaintext"}(n,t);return Object(T.a)(Object(T.a)({},z),{},{id:a,name:n,extention:t,lang:l,content:c,timeCreated:o,lastUpdated:o,current:!1,saved:!1,syncing:!1,error:!1,savedHash:"",justCreated:r})},q=Object(h.c)({name:"files",initialState:{allFiles:[],currentFile:z,loadingFilesStatus:"idle",error:null},reducers:{addFile:function(e,n){e.allFiles.filter((function(e){return e.id===n.payload.id}))[0]||(e.allFiles.map((function(e){return e.current=!1})),e.allFiles.unshift(n.payload))},changeCurrentFileContent:function(e,n){e.currentFile.content=n.payload.content,e.allFiles.map((function(t){return t.id===e.currentFile.id?t.content=n.payload.content:null}))},changeCurrentFile:function(e,n){e.allFiles.map((function(e){e.current=e.id===n.payload.id})),e.currentFile=e.allFiles.find((function(e){return e.id===n.payload.id}))},changeFileContent:function(e,n){e.currentFile.content=e.currentFile.id===n.payload.id?n.payload.content:e.currentFile.content,e.allFiles.map((function(e){return e.id===n.payload.id?e.content=n.payload.content:null}))},deleteFile:function(e,n){e.allFiles=e.allFiles.filter((function(e){return e.id!==n.payload.id}))},renameFile:function(e,n){e.allFiles.map((function(e){e.id===n.payload.id&&(e.name=n.payload.name,e.extention=n.payload.extention)}))}},extraReducers:(W={},Object(B.a)(W,R.pending,(function(e,n){e.loadingFilesStatus="pending"})),Object(B.a)(W,R.fulfilled,(function(e,n){e.loadingFilesStatus="fulfilled";var t=n.payload.data;e.allFiles=e.allFiles.concat(t.map((function(e){return U({name:e.name,extention:e.extention,id:e.nano_id})})))})),Object(B.a)(W,R.rejected,(function(e,n){e.loadingFilesStatus="failed",e.error=n.error})),Object(B.a)(W,D.pending,(function(e,n){e.allFiles.map((function(e){e.id===n.meta.arg&&(e.syncing=!0)}))})),Object(B.a)(W,D.fulfilled,(function(e,n){e.allFiles.map((function(e){e.id===n.meta.arg&&(e.syncing=!1,e.content=n.payload.data.content)}))})),Object(B.a)(W,D.rejected,(function(e,n){e.allFiles.map((function(e){e.id===n.meta.arg&&(e.syncing=!1,e.error=!0)}))})),Object(B.a)(W,C.pending,(function(e,n){e.allFiles.map((function(e){e.id===n.meta.arg.nanoId&&(e.syncing=!0)}))})),Object(B.a)(W,C.fulfilled,(function(e,n){var t=(new Date).toString(),a=j(n.meta.arg.content);e.allFiles.map((function(e){e.id===n.meta.arg.nanoId&&(e.syncing=!1,e.lastUpdated=t,e.error=!1,e.saved=!0,e.savedHash=a)})),e.currentFile.savedHash=e.currentFile.id===n.meta.arg.nanoId&&a})),Object(B.a)(W,C.rejected,(function(e,n){e.allFiles.map((function(e){e.id===n.meta.arg.nanoId&&(e.syncing=!1,e.error=!0)}))})),Object(B.a)(W,H.pending,(function(e,n){e.allFiles.map((function(e){e.id===n.meta.arg.nanoId&&(e.syncing=!0)}))})),Object(B.a)(W,H.fulfilled,(function(e,n){var t=new Date;e.allFiles.map((function(e){e.id===n.meta.arg.nanoId&&(e.syncing=!1,e.lastUpdated=t,e.error=!1,e.justCreated=!1)}))})),Object(B.a)(W,H.rejected,(function(e,n){e.allFiles.map((function(e){e.id===n.meta.arg.nanoId&&(e.syncing=!1,e.error=!0)}))})),Object(B.a)(W,P.pending,(function(e,n){e.allFiles.map((function(e){e.id===n.meta.arg.nanoId&&(e.syncing=!0)}))})),Object(B.a)(W,P.fulfilled,(function(e,n){e.allFiles.map((function(e){e.id===n.meta.arg.nanoId&&(e.syncing=!1)}))})),Object(B.a)(W,P.rejected,(function(e,n){e.allFiles.map((function(e){e.id===n.meta.arg.nanoId&&(e.syncing=!1,e.error=!0)}))})),W)}),G=q.actions,J=G.addFile,K=G.changeCurrentFileContent,Z=G.changeCurrentFile,$=G.changeFileContent,V=G.deleteFile,Q=G.renameFile,X=q.reducer;function Y(e){return c.a.createElement("a",{_id:e.file.id,className:"".concat(e.current," ").concat(e.save,"  ").concat(e.extention),onClick:e.menuItemClickHandler},c.a.createElement("div",{className:"MenuItemPanes"},c.a.createElement("div",{className:"MenuItemFilePane"},c.a.createElement(v,{icon:e.icon}),"\xa0\xa0\xa0",e.file.name,c.a.createElement("b",null,".",e.file.extention)),c.a.createElement("div",{className:"MenuItemIconPane"},e.syncing&&c.a.createElement(v,{icon:b.l,spin:!0}),e.error&&!e.syncing&&c.a.createElement(v,{icon:b.f}))))}var ee=t(178);var ne=t(146);t(334);function te(e){return c.a.createElement(ne.Menu,{id:e.id,theme:ne.theme.dark,animation:ne.animation.fade},c.a.createElement(ne.Item,{disabled:!e.isAdmin,id:e.id,onClick:function(n){return e.renameHandler(e.id)}},c.a.createElement(v,{icon:b.i}),"\xa0 Rename"),c.a.createElement(ne.Item,{disabled:!e.isAdmin,id:e.id,onClick:function(n){return e.deleteHandler(e.id)}},c.a.createElement(v,{icon:b.n}),"\xa0 Delete"),c.a.createElement(ne.Separator,null),c.a.createElement(ne.Item,{disabled:!0},c.a.createElement(v,{icon:b.b})," \xa0 Download"))}var ae=Object(a.createContext)(["",function(){}]),ce=Object(a.createContext)(["",function(){}]);function re(e){var n=function(){var e=Object(u.b)();return function(n){e(D(n))}}(),t=Object(u.b)(),r=e.file.current?"current":"",i=e.file.saved?"save":"css",o=e.file.extention,l=function(e){var n={css:ee.a,html:ee.b,js:ee.d,py:ee.f,java:ee.c,md:ee.e,other:b.d};return n[e]?n[e]:n.other}(o),d=Object(a.useContext)(ae),m=Object(s.a)(d,2)[1],f=Object(a.useContext)(ce),p=Object(s.a)(f,2)[1],E=F();return Object(a.useEffect)((function(){e.file.justCreated||n(e.file.id)}),[e.file.id,e.file.justCreated]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ne.MenuProvider,{id:e.file.id},c.a.createElement(c.a.Fragment,null,c.a.createElement(Y,{file:e.file,error:e.file.error,syncing:e.file.syncing,current:r,save:i,extention:o,icon:l,menuItemClickHandler:function(n){var a=n.currentTarget.getAttribute("_id");!e.file.syncing&&t(Z({id:a}))}}))),c.a.createElement(te,{isAdmin:E,id:e.file.id,renameHandler:function(e){return function(e){p(e)}(e)},deleteHandler:function(e){return function(e){m(e)}(e)}}))}var ie=Object(a.createContext)([!1,function(){}]);function oe(e){return c.a.createElement("a",{href:"#",className:"addFile",onClick:function(n){return e.setIsOpen(!0)}}," +")}function le(e){var n=Object(a.useContext)(ie),t=Object(s.a)(n,2),r=(t[0],t[1]);return c.a.createElement(oe,{setIsOpen:r})}t(335);function ue(e){return c.a.createElement("div",{className:"MenuLoading"},c.a.createElement(v,{icon:b.a,spin:!0}))}var se=t(285),de=t.n(se);function me(e){return c.a.createElement("div",{className:"menu"},c.a.createElement("div",{className:"MenuLogo"},c.a.createElement("img",{src:de.a,alt:"Logo"})),c.a.createElement("div",{className:"MenuFilesContainer"},e.loading&&c.a.createElement(ue,null),c.a.createElement("div",{className:"MenuItems"},e.allFiles.map((function(e){return c.a.createElement(re,{key:e.id,file:e})}))),e.isAdmin?c.a.createElement(le,null):null))}function fe(){var e=Object(a.useContext)(y),n=Object(u.c)((function(e){return e.workspace.workspaceId}));return[function(t,a){e.emit(t,Object(T.a)({workspace:n},a))},function(n,t){return e.on&&e.on(n,(function(e){t(e)}))}]}function pe(){var e=Object(u.b)(),n=Object(u.c)((function(e){return e.files.allFiles})),t="pending"===Object(u.c)((function(e){return e.files.loadingFilesStatus})),r=function(){var e=Object(u.c)((function(e){return e.workspace.workspaceId})),n=Object(u.b)();return function(){n(R(e))}}(),i=F(),o=fe(),l=Object(s.a)(o,2),d=(l[0],l[1]);return i||(d("FILE_CREATED",(function(n){e(J(n))})),d("FILE_RENAMED",(function(n){e(Q({id:n.id,name:n.name,extention:n.extention}))})),d("FILE_DELETED",(function(n){e(V({id:n.id}))}))),Object(a.useEffect)((function(e){return r()}),[]),c.a.createElement(me,{allFiles:n,loading:t,isAdmin:i})}t(336);function Ee(e){return c.a.createElement("div",{className:"SideBar"},c.a.createElement(pe,null))}var ve=t(286);function be(e){return c.a.createElement(ve.default,{width:e.width,height:e.height,language:e.lang,value:e.value,onChange:function(n){return e.onChange(n)},theme:"vs-dark"})}t(436);function ge(e){return c.a.createElement("div",{className:"code"},c.a.createElement(be,{width:"100%",height:"100%",lang:e.currentFile.lang||"javascript",value:e.currentFile.content||"",onChange:e.onChange}))}function je(e){var n=F();!function(){var e=k(),n=F();return function(){n&&(document.onkeydown=function(n){var t=n.which||n.keyCode;n.ctrlKey&&83===t&&(n.preventDefault(),e())})}}()();var t=Object(u.b)(),a=Object(u.c)((function(e){return e.files.currentFile})),r=fe(),i=Object(s.a)(r,2),o=i[0],l=i[1];return!n&&l("FILE_CHANGES",(function(e){return t($({id:e.id,content:e.content}))})),c.a.createElement(ge,{currentFile:a,onChange:function(e){n&&(t(K({content:e})),o("FILE_CHANGED",{id:a.id,content:e}))}})}t(437),t(438);function he(e){return c.a.createElement("div",{className:"RightSideBarDownload"},c.a.createElement(v,{size:"lg",icon:b.g}),c.a.createElement("p",{className:"RightSideBarDownloadText"},"Download Files"))}function Oe(e){return c.a.createElement("div",Object.assign({className:"DragZone ".concat(e.isdraggedclass," ")},e),e.children,"pending"===e.status?c.a.createElement(v,{icon:b.l,spin:!0}):"error"===e.status?c.a.createElement(v,{icon:b.f}):null)}t(439);var we=t(440),Ce=function(e){return we(e)};function ke(e){return/^[0-9a-zA-Z\.]*$/.test(e)}function Fe(e){var n=Object(a.useState)(!1),t=Object(s.a)(n,2),r=t[0],i=t[1],o=Object(a.useState)("idle"),l=Object(s.a)(o,2),d=l[0],m=l[1],f=Object(u.b)(),p=Object(u.c)((function(e){return e.workspace.workspaceId})),E=r?"dragged":"";return c.a.createElement(Oe,{onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault(),i(!0)},onDragLeave:function(e){e.preventDefault(),i(!1)},onDrop:function(e){e.preventDefault();var n=e.dataTransfer.files[0];n&&(!0===function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.maxSize?n.maxSize:16e3,a=n.allowedExtentions||[],c=n.preventedExtentions||[],r=Ce(e.name),i=ke(r),o=e.size<=t,l=(!a.length||a.indexOf(e.type)>=0)&&(!c.length||c.indexOf(e.type)<0),u=[];return!!(i&&o&&l)||(!i&&u.push("name"),!o&&u.push("size"),!l&&u.push("extention"),u)}(n,{maxSize:16e3})?(m((function(){return"pending"})),function(e){return new Promise((function(n,t){var a=new FileReader;a.readAsText(e),console.log("File Reader : ",a),a.onerror=function(e){a.abort(),t(a.error)},a.onload=function(e){n(e.target.result)}}))}(n).then((function(e){var t=U({name:n.name,id:Object(h.e)(),content:e});f(J(t)),f(H({name:t.name,extention:t.extention,nanoId:t.id,workspaceId:p,content:t.content})),m((function(){return"idle"})),i(!1)})).catch(m((function(){return"error"})))):m((function(){return"error"})))},isdraggedclass:E,status:d},e.children)}t(444);function Ie(e){return e.isAdmin?c.a.createElement("div",{className:"RightSideBarUpload"},c.a.createElement(Fe,null,c.a.createElement(v,{size:"lg",icon:b.h}),c.a.createElement("p",{className:"RightSideBarUploadText"},"Upload Files ",c.a.createElement("br",null)," (Drag files here)"))):c.a.createElement("div",{className:"RightSideBarUpload deactivated"},c.a.createElement(v,{size:"lg",icon:b.h}),c.a.createElement("p",{className:"RightSideBarUploadText"},"Upload Files ",c.a.createElement("br",null)," (Drag files here)"))}function xe(e){var n=F();return c.a.createElement(Ie,{isAdmin:n})}function Ne(e){return c.a.createElement("div",{className:"RightSideBarContainer"},c.a.createElement("div",{className:"RightSideBarSub RightSideBarTop"},c.a.createElement(he,null)),c.a.createElement("div",{className:"RightSideBarSub RightSideBarBottom"},c.a.createElement(xe,null)))}t(445);function Se(e){return c.a.createElement("div",{className:"MiddleRow"},c.a.createElement(Ee,null),c.a.createElement(je,null),c.a.createElement(Ne,null))}t(446),t(264);var ye=Object(a.createContext)([{},function(){}]);function Le(e){var n=this;return c.a.createElement("div",{className:"ShareModalContantContainer"},c.a.createElement("div",{className:"ShareModalContantSub"},c.a.createElement("span",{className:"ShareModalContentText"},"Public Link:"),c.a.createElement("div",{className:"ShareModalContentSubLink"},c.a.createElement("span",{id:"ShareModalContentPublic"},e.publicLink),c.a.createElement("button",{onClick:function(n){return e.CopyCodeHandler(n,"ShareModalContentPublic")},className:"ShareModalContentSubCopy"},c.a.createElement(v,{onClick:function(){return n.parentElement.click()},icon:b.c})))),e.isAdmin&&c.a.createElement("div",{className:"ShareModalContantSub"},c.a.createElement("span",{className:"ShareModalContentText"},"Admin Link:"),c.a.createElement("div",{className:"ShareModalContentSubLink"},c.a.createElement("span",{id:"ShareModalContentAdmin"},e.adminLink),c.a.createElement("button",{onClick:function(n){return e.CopyCodeHandler(n,"ShareModalContentAdmin")},className:"ShareModalContentSubCopy"},c.a.createElement(v,{icon:b.c})))))}var Me=t(241),Ae=t.n(Me);t(456);function Be(e){return Object(a.useEffect)((function(e){return Ae.a.setAppElement("body")}),[]),c.a.createElement(Ae.a,{isOpen:e.open,onAfterOpen:e.onAfterOpen&&e.onAfterOpen,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:0}},contentLabel:e.title?e.title:""},c.a.createElement("div",{className:"ModalInner"},c.a.createElement("div",{className:"ModalInnerHeader"},c.a.createElement("div",{className:"ModalInnerHeaderTitle"},c.a.createElement("h2",{className:"ModalInnerHeaderTitleText"},e.title&&e.title)),c.a.createElement("div",{className:"ModalInnerHeaderCloseContainer"},c.a.createElement("button",{className:"ModalInnerHeaderCloseButton",onClick:function(){return e.setIsOpen(!1)}},c.a.createElement(v,{icon:b.m,size:"lg"})))),c.a.createElement("div",{className:"ModalInnerContent"},e.children)))}function Re(e){var n=Object(a.useContext)(ye),t=Object(s.a)(n,2)[1],r=Object(a.useContext)(d),i=Object(s.a)(r,2),o=i[0],l=i[1],m=Object(u.c)((function(e){return e.workspace})),f=m.publicCode,p=m.adminCode,E="".concat("https://codejar.live/","ws/").concat(f),v="".concat("https://codejar.live/","ws/").concat(p),b=F();return c.a.createElement(Be,{open:o,setIsOpen:l,title:"Share this workspace"},c.a.createElement(Le,{publicLink:E,adminLink:v,isAdmin:b,CopyCodeHandler:function(e,n){var a=document.getElementById(n).innerText;navigator.clipboard.writeText(a).then((function(e){return t({visible:!0,text:"Copied to the clipboard"})})).catch((function(e){return t({visible:!0,text:"Error copying the data"})}))}}))}t(457);function De(e){return e.visible?c.a.createElement("div",{className:"StatusBarContainer"},c.a.createElement("span",{className:"StatusBarTex"},e.text)):c.a.createElement("span",null)}function He(e){var n=Object(a.useContext)(ye),t=Object(s.a)(n,2),r=t[0],i=t[1];return Object(a.useEffect)((function(){setTimeout((function(){return i(Object(T.a)(Object(T.a)({},r),{},{text:"",visible:!1}))}),6e3)}),[r,i]),c.a.createElement(De,{visible:r.visible,text:r.text})}t(458);function Pe(e){return c.a.createElement("div",{className:"BottomRowContainer"},c.a.createElement(He,null))}t(459);function Te(e){return c.a.createElement("div",{className:"AddFileModalContainer"},c.a.createElement("div",{className:"AddFileModalInputs"},c.a.createElement("input",{type:"text",className:"AddFileModalInput",id:"AddFileModalInput"}),c.a.createElement("button",{className:"AddFileModalButton",onClick:function(n){return e.addToFiles(document.querySelector("#AddFileModalInput").value)}},c.a.createElement(v,{icon:b.j}))),e.validationError&&c.a.createElement("div",{className:"AddFileModalErrors"},c.a.createElement("p",null,"Please enter a valid file name.")))}var We=function(e,n,t){var a=e+"."+n;return t.filter((function(e){return e===a})).length>0};function _e(e){var n=Object(a.useContext)(ie),t=Object(s.a)(n,2),r=t[0],i=t[1],o=Object(a.useState)(!1),l=Object(s.a)(o,2),d=l[0],m=l[1],f=Object(u.b)(),p=Object(u.c)((function(e){return e.files.allFiles})).map((function(e){return e.name+"."+e.extention})),E=Object(u.c)((function(e){return e.workspace.workspaceId})),v=fe(),b=Object(s.a)(v,1)[0];return c.a.createElement(Be,{open:r,setIsOpen:i,title:"Create a file"},c.a.createElement(Te,{validationError:d,addToFiles:function(e){if(ke(e=Ce(e))){var n=U({name:e,id:Object(h.e)(),justCreated:!0});We(n.name,n.extention,p)?m(!0):(m(!1),f(J(n)),f(Z({id:n.id})),f(H({name:n.name,extention:n.extention,nanoId:n.id,workspaceId:E,content:""})),b("FILE_CREATED",n),i((function(e){return!1})))}else m(!0)}}))}t(460);function ze(e){return c.a.createElement("div",{className:"DeleteFileModalContainer"},c.a.createElement("button",{className:"DeleteFileModalButton",onClick:function(n){return e.deleteClickHandler(e.id)}},"Delete"),c.a.createElement("button",{className:"DeleteFileModalButton",onClick:function(n){return e.setIsOpen(!1)}},"Cancel"))}var Ue=Object(h.b)("workspace/deleteFile",(function(e){var n=e.nanoId,t=e.workspaceId;return w.a.delete("".concat("https://codejar.live/","ws/file"),{params:{nanoid:n,workspaceid:t}})})),qe=function(){var e=Object(u.b)(),n=Object(u.c)((function(e){return e.workspace.workspaceId})),t=fe(),a=Object(s.a)(t,1)[0];return function(t){e(Ue({nanoId:t,workspaceId:n})),e(V({id:t})),a("FILE_DELETED",{id:t})}};function Ge(e){var n=qe(),t=Object(a.useContext)(ae),r=Object(s.a)(t,2),i=r[0],o=r[1],l=!!i,d=Object(u.c)((function(e){return e.files.allFiles.filter((function(e){return e.id===i}))}))[0],m=d?"".concat(d.name,".").concat(d.extention):null;return c.a.createElement(Be,{open:l,setIsOpen:o,title:"Are you sure you want to delete ".concat(m," ?")},c.a.createElement(ze,{id:i,deleteClickHandler:function(e){n(e),o(!1)},setIsOpen:o}))}t(461);function Je(e){return c.a.createElement("div",{className:"RenameFileModalContainer"},c.a.createElement("div",{className:"RenameFileModalInputs"},c.a.createElement("input",{type:"text",defaultValue:e.name,className:"RenameFileModalInput",id:"RenameFileModalInput"}),c.a.createElement("button",{className:"RenameFileModalButton",onClick:function(n){return e.renameClickHandler(e.id,document.querySelector("#RenameFileModalInput").value)}},c.a.createElement(v,{icon:b.e}))),e.validationError&&c.a.createElement("div",{className:"RenameFileModalErrors"},c.a.createElement("p",null,"Please enter a valid file name.")))}var Ke=function(){var e=Object(u.b)(),n=fe(),t=Object(s.a)(n,1)[0],a=Object(u.c)((function(e){return e.files.allFiles})).map((function(e){return e.name+"."+e.extention})),c=Object(u.c)((function(e){return e.workspace.workspaceId}));return function(n,r,i,o){if(ke(r=Ce(r))){var l=U({name:r,id:n,justCreated:!1});We(l.name,l.extention,a)?o():(e(Q({name:l.name,extention:l.extention,id:l.id})),e(P({name:l.name,extention:l.extention,nanoId:l.id,workspaceId:c})),t("FILE_RENAMED",l),i())}else o()}};function Ze(e){var n=Object(a.useContext)(ce),t=Object(s.a)(n,2),r=t[0],i=t[1],o=!!r,l=Object(u.c)((function(e){return e.files.allFiles.filter((function(e){return e.id===r}))}))[0],d=l?"".concat(l.name,".").concat(l.extention):null,m=Ke(),f=Object(a.useState)(!1),p=Object(s.a)(f,2),E=p[0],v=p[1],b=function(){v(!1),i((function(e){return!1}))},g=function(){v(!0)};return c.a.createElement(Be,{open:o,setIsOpen:i,title:"Renaming ".concat(d," ?")},c.a.createElement(Je,{validationError:E,name:d,id:r,renameClickHandler:function(e,n){m(e,n,b,g)}}))}function $e(e){var n=Object(a.useState)({visible:!1,text:""}),t=Object(s.a)(n,2),r=t[0],i=t[1];return c.a.createElement(ye.Provider,{value:[r,i]},e.children)}function Ve(e){var n=Object(a.useState)(!1),t=Object(s.a)(n,2),r=t[0],i=t[1];return c.a.createElement(d.Provider,{value:[r,i]},e.children)}function Qe(e){var n=Object(a.useState)(!1),t=Object(s.a)(n,2),r=t[0],i=t[1];return c.a.createElement(ie.Provider,{value:[r,i]},e.children)}var Xe=t(287);function Ye(e){var n=Object(u.c)((function(e){return e.workspace.workspaceId})),t=Object(a.useState)({}),r=Object(s.a)(t,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){var e=new Xe("https://codejar.live/",{query:{workspaceId:n}});o(e)}),[]),c.a.createElement(y.Provider,{value:i},e.children)}function en(e){var n=Object(a.useState)(""),t=Object(s.a)(n,2),r=t[0],i=t[1];return c.a.createElement(ae.Provider,{value:[r,i]},e.children)}function nn(e){var n=Object(a.useState)(!1),t=Object(s.a)(n,2),r=t[0],i=t[1];return c.a.createElement(ce.Provider,{value:[r,i]},e.children)}function tn(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement($e,null,c.a.createElement(Ve,null,c.a.createElement(Qe,null,c.a.createElement(en,null,c.a.createElement(nn,null,c.a.createElement(Ye,null,e.children)))))))}function an(e){return c.a.createElement("div",{className:"EditorContainer"},c.a.createElement(tn,null,c.a.createElement(A,null),c.a.createElement(Se,null),c.a.createElement(Pe,null),c.a.createElement(_e,null),c.a.createElement(Re,null),c.a.createElement(Ge,null),c.a.createElement(Ze,null)))}function cn(e){return c.a.createElement(an,null)}var rn=Object(h.b)("workspace/fetchCodes",(function(e){return w.a.get("".concat("https://codejar.live/","ws/exists"),{params:{wsid:e}})})),on=(t(494),t(288)),ln=t.n(on);function un(){return c.a.createElement("div",{className:"LoadingWorkspace"},c.a.createElement("img",{className:"LoadingWorkspaceLogo",src:ln.a}),c.a.createElement("div",{className:"LoadingWorkspaceLoader"},c.a.createElement(v,{icon:b.l,spin:!0})))}function sn(e){var n=Object(u.c)((function(e){return e.workspace.codeFetchStatus})),t=Object(u.b)(),r=(Object(u.c)((function(e){return e.workspace.workspaceId})),Object(l.g)().ws_id);switch(Object(a.useEffect)((function(){t(rn(r))}),[]),n){case"idle":case"pending":return c.a.createElement(un,null);case"fulfilled":return c.a.createElement(cn,null);default:return c.a.createElement(l.a,null)}}function dn(e){return c.a.createElement(sn,null)}var mn=t(290),fn=t.n(mn);t(499);function pn(e){return c.a.createElement("div",{className:"LandingPageContainer"},c.a.createElement("div",{className:"LandingPageLogoContainer"},c.a.createElement("img",{className:"LandingPageLogo",src:fn.a,alt:"Code Jar Logo"})),c.a.createElement("div",{className:"LandingPageButtonsContainer"},c.a.createElement("button",{className:"LandingPageButton",onClick:e.newWorkspaceHandler}," CREATE A WORKSPACE "),c.a.createElement("button",{className:"LandingPageButton"}," GO TO A WORKSPACE ")))}var En,vn=Object(h.b)("workspace/create",(function(){return w.a.get("".concat("https://codejar.live/","ws/create"))}));function bn(e){var n=Object(u.b)();var t=Object(u.c)((function(e){return e.workspace.workspaceId}));return t&&window.location.replace("/ws/".concat(t)),c.a.createElement(pn,{newWorkspaceHandler:function(){n(vn())}})}var gn=Object(h.c)({name:"workspace",initialState:{workspaceId:"",ownerEmail:"",publicCode:"",adminCode:"",codeFetchStatus:"idle",error:null},reducers:{setworkspaceId:function(e,n){e.workspaceId=n.payload.id}},extraReducers:(En={},Object(B.a)(En,rn.pending,(function(e,n){e.codeFetchStatus="pending"})),Object(B.a)(En,rn.fulfilled,(function(e,n){e.codeFetchStatus="fulfilled",e.adminCode=n.payload.data.admin_code,e.publicCode=n.payload.data.public_code,e.workspaceId=n.payload.data.admin_code?n.payload.data.admin_code:n.payload.data.public_code})),Object(B.a)(En,rn.rejected,(function(e,n){e.codeFetchStatus="error",e.error=n.error.message})),Object(B.a)(En,vn.pending,(function(e,n){e.codeFetchStatus="pending"})),Object(B.a)(En,vn.fulfilled,(function(e,n){e.codeFetchStatus="fulfilled",e.workspaceId=n.payload.data.adminCode})),Object(B.a)(En,vn.rejected,(function(e,n){e.codeFetchStatus="error",e.error=n.error.message})),En)}),jn=(gn.actions.setworkspaceId,gn.reducer),hn=Object(h.a)({reducer:{files:X,workspace:jn},middleware:Object(h.d)({serializableCheck:{ignoredActionPaths:["meta.arg","payload.config","payload.request"]}})});function On(e){return c.a.createElement(u.a,{store:hn},c.a.createElement(o.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(l.d,null,c.a.createElement(l.b,{path:"/ws/:ws_id",exact:!0,component:dn}),c.a.createElement(l.b,{path:"/",exact:!0,component:bn})))))}var wn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Cn(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var kn=t(539),Fn=t(292);kn.a({dsn:"https://073c6ef986ac4a31a2802985cc807fb3@o349957.ingest.sentry.io/5416890",integrations:[new Fn.a.BrowserTracing],tracesSampleRate:1}),i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(On,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");wn?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Cn(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Cn(n,e)}))}}()}},[[294,1,2]]]);
//# sourceMappingURL=main.fe3cc3a6.chunk.js.map